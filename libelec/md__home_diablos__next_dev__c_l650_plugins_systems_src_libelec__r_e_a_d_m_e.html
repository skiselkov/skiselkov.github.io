<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libelec: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libelec
   </div>
   <div id="projectbrief">A general purpose library of utility functions designed to make it easier to develop addons for the X-Plane flight simulator.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a simple aircraft electrical system simulation library for use in flight simulators such as X-Plane and MSFS.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Donations</h1>
<p>To leave a voluntary donation, please follow the PayPal link below:</p>
<p><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=8DN9LYD5VP4NY"><img src="https://img.shields.io/badge/Donate-PayPal-green.svg" alt="Donate" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md2"></a>
License</h1>
<p>This library is licensed under the CDDL 1.0 license. This lets you incorporate it into your projects (even closed-source/payware ones) without disclosing source code. The license only requires that you disclose modifications that you have done to the source code comprising <b>this library</b>. Any files that are not part of this library are <b>not</b> covered by this requirement.</p>
<p>For the text of the license, see <a href="https://opensource.org/license/cddl-1-0/">https://opensource.org/license/cddl-1-0/</a></p>
<h1><a class="anchor" id="autotoc_md3"></a>
Prerequisites</h1>
<p>libelec depends on libacfutils, which you can get here: <a href="https://github.com/skiselkov/libacfutils">https://github.com/skiselkov/libacfutils</a></p>
<p>You will also require a C99-compliant compiler. Most major modern C compilers should be able to compile libelec, including GCC (v3.1+), Clang (v1.0+) and MSVC (Visual Studio 2015+).</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Building</h1>
<p>You can build libelec in one of two ways:</p>
<ol type="1">
<li><p class="startli">Simply include the source files in your project. This is the preferred method. The library's core functionality is implemented in <code><a class="el" href="libelec_8c_source.html">libelec.c</a></code>, so that's the only file you need to add. See "Directly Incorporating In
   Your Project" below for more information on some build-control macros you can define to fine-tune the build.</p>
<p class="startli">If you wish to include the state visualization capability, you will need to also add <code><a class="el" href="libelec__drawing_8c_source.html">libelec_drawing.c</a></code> and <code><a class="el" href="libelec__vis_8c_source.html">libelec_vis.c</a></code> to your build as well. See <a class="el" href="libelec__vis_8h_source.html">libelec_vis.h</a> for more information.</p>
</li>
<li>Use CMake and the included <code>src/CMakeLists.txt</code> file to build a static library. You will then want to add this library to your linker inputs. See "Building Using CMake" below for more details.</li>
</ol>
<p>In both cases, you will need to include <a class="el" href="libelec_8h.html">libelec.h</a> from your project to control the library.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Directly Incorporating In Your Project</h2>
<p>libelec is written in C99, so you will want to make sure your compiler's C language mode is set to at least C99 (newer is ok, but ISO C89, ANSI C90 or K&amp;R C are too old). You can also define the following optional macros to fine-tune the libelec build:</p>
<ul>
<li><code>XPLANE</code> - if this macro is defined, libelec will depend on running inside of X-Plane and having the XPLM available. The benefit is that libelec will be able to automatically adapt its simulation rate to that of X-Plane. If the user enters time acceleration, libelec will automatically "follow" along. If you want to utilize libelec in a different (non-XPlane) environment, you will need to control the simulation rate yourself by regularly calling <a class="el" href="libelec_8h.html#a1dd482ab4f0bc8b029a4bd871f11f48d">libelec_sys_set_time_factor()</a>.</li>
<li><code>LIBELEC_WITH_DRS</code> - if defined, libelec will expose all component state via X-Plane read-only datarefs. Every component will have a set of double-precision floating point datarefs constructed for it, using the following pattern:<ul>
<li><code>libelec/comp/&lt;COMPONENT_NAME&gt;/in_volts</code></li>
<li><code>libelec/comp/&lt;COMPONENT_NAME&gt;/out_volts</code></li>
<li><code>libelec/comp/&lt;COMPONENT_NAME&gt;/in_amps</code></li>
<li><code>libelec/comp/&lt;COMPONENT_NAME&gt;/out_amps</code></li>
<li><code>libelec/comp/&lt;COMPONENT_NAME&gt;/in_pwr</code></li>
<li><code>libelec/comp/&lt;COMPONENT_NAME&gt;/out_pwr</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
Building Using CMake</h2>
<p>Building the using CMake will produce a static library, which you can then link into your project. To build using the included CMakeLists.txt do the following:</p>
<ol type="1">
<li>Create a <code>build</code> subdirectory under <code>src</code> to hold the build products: <div class="fragment"><div class="line">$ mkdir src/build</div>
<div class="line">$ cd src/build</div>
</div><!-- fragment --></li>
<li>Configure CMake. Please note that you will require the redistributable package of libacfutils installed somewhere (say at path <code>${LIBACFUTILS}</code>): <div class="fragment"><div class="line">$ cmake .. -DLIBACFUTILS=${LIBACFUTILS}</div>
</div><!-- fragment --></li>
<li>Now just run the build: <div class="fragment"><div class="line">$ make</div>
</div><!-- fragment --></li>
</ol>
<p>This will produce a static library named either <code>libelec.lib</code> (on Windows), or <code>libelec.a</code> (on macOS and Linux). For macOS, the binary will automatically contain both the x86-64 and arm64 bits and can thus be used to build universal software. On Linux, you can cross-compile to Windows (MinGW) using the following CMake command instead (you will obviously also need to have the MinGW toolchain installed separately): </p><div class="fragment"><div class="line">$ cmake .. -DLIBACFUTILS=${LIBACFUTILS} \</div>
<div class="line">    -DCMAKE_TOOLCHAIN_FILE=../XCompile.cmake -DHOST=x86_64-w64-mingw32</div>
<div class="line">$ make</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
Usage</h1>
<p>To initialize the library, use <a class="el" href="libelec_8h.html#a4df94078c328df09d155986f07d91f00">libelec_new()</a>. This loads an electrical network definition file and returns an electrical system handle. This network can then be started using <a class="el" href="libelec_8h.html#ae89af50399d40bf3d501c44d6200d9aa">libelec_sys_start()</a>. You can then control the network component state using the various component functions contained in <a class="el" href="libelec_8h.html">libelec.h</a> while the network operates asynchronously on a background thread (all component interface functions are thread-safe). Before shutting down, you must first stop the network using <a class="el" href="libelec_8h.html#a494c5d3d0246792f8fb1497572d646d2">libelec_sys_stop()</a> and subsequently deallocate the network using <a class="el" href="libelec_8h.html#ae11d4ec058cda24f00c6b8470227a452">libelec_destroy()</a>.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Configuration File Format</h1>
<p>See <a class="el" href="md__home_diablos__next_dev__c_l650_plugins_systems_src_libelec__conf_file_format.html">Configuration File Format</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
