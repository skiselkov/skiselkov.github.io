<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libelec: libelec_vis.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libelec
   </div>
   <div id="projectbrief">A general purpose library of utility functions designed to make it easier to develop addons for the X-Plane flight simulator.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">libelec_vis.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;acfutils/mt_cairo_render.h&gt;</code><br />
<code>#include &quot;<a class="el" href="libelec_8h_source.html">libelec.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for libelec_vis.h:</div>
<div class="dyncontent">
<div class="center"><img src="libelec__vis_8h__incl.png" border="0" usemap="#alibelec__vis_8h" alt=""/></div>
<map name="alibelec__vis_8h" id="alibelec__vis_8h">
<area shape="rect" title=" " alt="" coords="94,5,197,32"/>
<area shape="rect" title=" " alt="" coords="5,155,88,181"/>
<area shape="rect" title=" " alt="" coords="49,80,241,107"/>
<area shape="rect" href="libelec_8h.html" title=" " alt="" coords="265,80,343,107"/>
<area shape="rect" title=" " alt="" coords="129,155,204,181"/>
<area shape="rect" title=" " alt="" coords="229,155,342,181"/>
<area shape="rect" title=" " alt="" coords="367,155,489,181"/>
<area shape="rect" title=" " alt="" coords="514,155,670,181"/>
</map>
</div>
</div>
<p><a href="libelec__vis_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a38d71b9ff3fd7e4ab0c6d01055668d3a"><td class="memItemLeft" align="right" valign="top">libelec_vis_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libelec__vis_8h.html#a38d71b9ff3fd7e4ab0c6d01055668d3a">libelec_vis_new</a> (const elec_sys_t *sys, double pos_scale, double font_sz)</td></tr>
<tr class="separator:a38d71b9ff3fd7e4ab0c6d01055668d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fdb129e5847cec542c9de53b31cdb32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libelec__vis_8h.html#a0fdb129e5847cec542c9de53b31cdb32">libelec_vis_destroy</a> (libelec_vis_t *vis)</td></tr>
<tr class="separator:a0fdb129e5847cec542c9de53b31cdb32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39e8bfa68bd377bd4552f1a3163f1fed"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libelec__vis_8h.html#a39e8bfa68bd377bd4552f1a3163f1fed">libelec_vis_is_open</a> (libelec_vis_t *vis)</td></tr>
<tr class="separator:a39e8bfa68bd377bd4552f1a3163f1fed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a589375fdbbde78fa96ecfc6856a56c92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libelec__vis_8h.html#a589375fdbbde78fa96ecfc6856a56c92">libelec_vis_open</a> (libelec_vis_t *vis)</td></tr>
<tr class="separator:a589375fdbbde78fa96ecfc6856a56c92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87d4a628d1bfc912d7163e35b500c3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libelec__vis_8h.html#ad87d4a628d1bfc912d7163e35b500c3e">libelec_vis_close</a> (libelec_vis_t *vis)</td></tr>
<tr class="separator:ad87d4a628d1bfc912d7163e35b500c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a123c518a578620393370c3124374706d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libelec__vis_8h.html#a123c518a578620393370c3124374706d">libelec_vis_set_offset</a> (libelec_vis_t *vis, vect2_t offset)</td></tr>
<tr class="separator:a123c518a578620393370c3124374706d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae50a8ed36b43cc55dcea9bb3e3937f40"><td class="memItemLeft" align="right" valign="top">vect2_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="libelec__vis_8h.html#ae50a8ed36b43cc55dcea9bb3e3937f40">libelec_vis_get_offset</a> (const libelec_vis_t *vis)</td></tr>
<tr class="separator:ae50a8ed36b43cc55dcea9bb3e3937f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains a simple visualizer for libelec networks. This is using X-Plane's XPLM SDK for window handling, compositing and mouse interaction.</p>
<p>To create a new visualizer, use <a class="el" href="libelec__vis_8h.html#a38d71b9ff3fd7e4ab0c6d01055668d3a">libelec_vis_new()</a>, passing it a handle to an initialized and started elec_sys_t. On shutdown, you must call <a class="el" href="libelec__vis_8h.html#a0fdb129e5847cec542c9de53b31cdb32">libelec_vis_destroy()</a> before stopping and destroying the referenced electrical system. You can open the window using <a class="el" href="libelec__vis_8h.html#a589375fdbbde78fa96ecfc6856a56c92">libelec_vis_open()</a> if it was closed by the user (use <a class="el" href="libelec__vis_8h.html#a39e8bfa68bd377bd4552f1a3163f1fed">libelec_vis_is_open()</a> to check).</p>
<dl class="section note"><dt>Note</dt><dd>If you plan on running libelec in a simulator other than X-Plane, or outside of a simulator entirely, you can still use the same visualizations by using the functions from <code><a class="el" href="libelec__drawing_8h.html">libelec_drawing.h</a></code> and implementing your own window handling and interaction layers.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="libelec__vis_8h.html#a38d71b9ff3fd7e4ab0c6d01055668d3a">libelec_vis_new()</a> </dd>
<dd>
<a class="el" href="libelec__vis_8h.html#a0fdb129e5847cec542c9de53b31cdb32">libelec_vis_destroy()</a> </dd>
<dd>
<a class="el" href="libelec__vis_8h.html#a589375fdbbde78fa96ecfc6856a56c92">libelec_vis_open()</a> </dd>
<dd>
<a class="el" href="libelec__vis_8h.html#a39e8bfa68bd377bd4552f1a3163f1fed">libelec_vis_is_open()</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="libelec__vis_8h_source.html">libelec_vis.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad87d4a628d1bfc912d7163e35b500c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad87d4a628d1bfc912d7163e35b500c3e">&#9670;&nbsp;</a></span>libelec_vis_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libelec_vis_close </td>
          <td>(</td>
          <td class="paramtype">libelec_vis_t *&#160;</td>
          <td class="paramname"><em>vis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Closes the libelec_vis_t window, if open, otherwise does nothing. Closing the window stops the renderer thread and deinitializes the renderer's framebuffer, so removes essentially all CPU, RAM and VRAM footprint that the visualizer had while open. As such, you don't need to immediately perform a <a class="el" href="libelec__vis_8h.html#a0fdb129e5847cec542c9de53b31cdb32">libelec_vis_destroy()</a> as soon as the window is closed. You can delay that until simulator shutdown. This will help preserve the window's position and size, if the user moved and/or resized it. </p>

<p class="definition">Definition at line <a class="el" href="libelec__vis_8c_source.html#l00492">492</a> of file <a class="el" href="libelec__vis_8c_source.html">libelec_vis.c</a>.</p>

</div>
</div>
<a id="a0fdb129e5847cec542c9de53b31cdb32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fdb129e5847cec542c9de53b31cdb32">&#9670;&nbsp;</a></span>libelec_vis_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libelec_vis_destroy </td>
          <td>(</td>
          <td class="paramtype">libelec_vis_t *&#160;</td>
          <td class="paramname"><em>vis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroys a previously created libelec_vis_t. You must call this before destroying the underlying elec_sys_t handle. </p>

<p class="definition">Definition at line <a class="el" href="libelec__vis_8c_source.html#l00412">412</a> of file <a class="el" href="libelec__vis_8c_source.html">libelec_vis.c</a>.</p>

</div>
</div>
<a id="ae50a8ed36b43cc55dcea9bb3e3937f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae50a8ed36b43cc55dcea9bb3e3937f40">&#9670;&nbsp;</a></span>libelec_vis_get_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vect2_t libelec_vis_get_offset </td>
          <td>(</td>
          <td class="paramtype">const libelec_vis_t *&#160;</td>
          <td class="paramname"><em>vis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The current panning offset of the view. </dd></dl>

<p class="definition">Definition at line <a class="el" href="libelec__vis_8c_source.html#l00444">444</a> of file <a class="el" href="libelec__vis_8c_source.html">libelec_vis.c</a>.</p>

</div>
</div>
<a id="a39e8bfa68bd377bd4552f1a3163f1fed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39e8bfa68bd377bd4552f1a3163f1fed">&#9670;&nbsp;</a></span>libelec_vis_is_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool libelec_vis_is_open </td>
          <td>(</td>
          <td class="paramtype">libelec_vis_t *&#160;</td>
          <td class="paramname"><em>vis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>True if the visualizer window is open, false if it isn't. </dd></dl>

<p class="definition">Definition at line <a class="el" href="libelec__vis_8c_source.html#l00454">454</a> of file <a class="el" href="libelec__vis_8c_source.html">libelec_vis.c</a>.</p>

</div>
</div>
<a id="a38d71b9ff3fd7e4ab0c6d01055668d3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38d71b9ff3fd7e4ab0c6d01055668d3a">&#9670;&nbsp;</a></span>libelec_vis_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">libelec_vis_t* libelec_vis_new </td>
          <td>(</td>
          <td class="paramtype">const elec_sys_t *&#160;</td>
          <td class="paramname"><em>sys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>pos_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>font_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a window showing a visualization of an electrical network. This is using the drawing routines within <code><a class="el" href="libelec__drawing_8h.html">libelec_drawing.h</a></code> to draw an image of the network, as well as implement mouse interaction for panning &amp; zooming around in the network.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sys</td><td>The electrical system to display. This must have been previously initialized using <a class="el" href="libelec_8h.html#a726d387a49134ed486ff6c85967beb79">libelec_new()</a>. The visualizer keeps a reference to the system, so you must NOT destroy the elec_sys_t before the visualizer. </td></tr>
    <tr><td class="paramname">pos_scale</td><td>A scaling multiplier applied to all <code>GUI_POS</code> stanzas in the network layout configuration file. This lets you use abstract size units in the config file and then scale them up as you see fit. </td></tr>
    <tr><td class="paramname">font_sz</td><td>Default font size to be used for all drawing. This sets the default header and title sizes, and is also used as a baseline for smaller font scales for things such as subscripts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An initialized visualizer, ready for display. The window of the visualizer is not yet visible. You should call <a class="el" href="libelec__vis_8h.html#a589375fdbbde78fa96ecfc6856a56c92">libelec_vis_open()</a> to make it visible. </dd></dl>

<p class="definition">Definition at line <a class="el" href="libelec__vis_8c_source.html#l00365">365</a> of file <a class="el" href="libelec__vis_8c_source.html">libelec_vis.c</a>.</p>

</div>
</div>
<a id="a589375fdbbde78fa96ecfc6856a56c92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a589375fdbbde78fa96ecfc6856a56c92">&#9670;&nbsp;</a></span>libelec_vis_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libelec_vis_open </td>
          <td>(</td>
          <td class="paramtype">libelec_vis_t *&#160;</td>
          <td class="paramname"><em>vis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens the libelec_vis_t window. The window will automatically switch to VR positioning mode, if the user is in VR (or return back to 2D mode, if they have exited VR). </p>

<p class="definition">Definition at line <a class="el" href="libelec__vis_8c_source.html#l00467">467</a> of file <a class="el" href="libelec__vis_8c_source.html">libelec_vis.c</a>.</p>

</div>
</div>
<a id="a123c518a578620393370c3124374706d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a123c518a578620393370c3124374706d">&#9670;&nbsp;</a></span>libelec_vis_set_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libelec_vis_set_offset </td>
          <td>(</td>
          <td class="paramtype">libelec_vis_t *&#160;</td>
          <td class="paramname"><em>vis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vect2_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the panning offset of the contents of the rendering. Initially this is (0,0), but if your network layout is better centered on another position, you can use this function to pre-pan the view to that offset after creating the visualizer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">offset</td><td>The visual offset to set in pixels. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="libelec__vis_8c_source.html#l00434">434</a> of file <a class="el" href="libelec__vis_8c_source.html">libelec_vis.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
