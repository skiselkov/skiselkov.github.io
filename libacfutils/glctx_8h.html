<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libacfutils: acfutils/glctx.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libacfutils
   </div>
   <div id="projectbrief">A general purpose library of utility functions designed to make it easier to develop addons for the X-Plane flight simulator.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2f18166f86af4fcbeaddefb60d5355e9.html">acfutils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">glctx.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a href="glctx_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aca9bb5481d3299cff34eb5ab27e42fe8" id="r_aca9bb5481d3299cff34eb5ab27e42fe8"><td class="memItemLeft" align="right" valign="top">API_EXPORT glctx_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="glctx_8h.html#aca9bb5481d3299cff34eb5ab27e42fe8">glctx_create_invisible</a> (void *win_ptr, glctx_t *share_ctx, int major_ver, int minor_ver, bool_t fwd_compat, bool_t debug)</td></tr>
<tr class="separator:aca9bb5481d3299cff34eb5ab27e42fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad423f6f6e0898c08d42647f28635a01" id="r_aad423f6f6e0898c08d42647f28635a01"><td class="memItemLeft" align="right" valign="top">API_EXPORT void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="glctx_8h.html#aad423f6f6e0898c08d42647f28635a01">glctx_get_xplane_win_ptr</a> (void)</td></tr>
<tr class="separator:aad423f6f6e0898c08d42647f28635a01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec924da8e43a699fd146c7941ff7a02f" id="r_aec924da8e43a699fd146c7941ff7a02f"><td class="memItemLeft" align="right" valign="top">API_EXPORT bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="glctx_8h.html#aec924da8e43a699fd146c7941ff7a02f">glctx_make_current</a> (glctx_t *ctx)</td></tr>
<tr class="separator:aec924da8e43a699fd146c7941ff7a02f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a9472a02111d427a7fb46b491d7761" id="r_a21a9472a02111d427a7fb46b491d7761"><td class="memItemLeft" align="right" valign="top">API_EXPORT void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="glctx_8h.html#a21a9472a02111d427a7fb46b491d7761">glctx_get_window_system_handle</a> (glctx_t *ctx)</td></tr>
<tr class="separator:a21a9472a02111d427a7fb46b491d7761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34c5d5ff1ce2cf459cb2dcbad03a9a65" id="r_a34c5d5ff1ce2cf459cb2dcbad03a9a65"><td class="memItemLeft" align="right" valign="top">API_EXPORT glctx_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="glctx_8h.html#a34c5d5ff1ce2cf459cb2dcbad03a9a65">glctx_get_current</a> (void)</td></tr>
<tr class="separator:a34c5d5ff1ce2cf459cb2dcbad03a9a65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac854d8fc8cb1a3852cc12d0a718a6ab2" id="r_ac854d8fc8cb1a3852cc12d0a718a6ab2"><td class="memItemLeft" align="right" valign="top">API_EXPORT bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="glctx_8h.html#ac854d8fc8cb1a3852cc12d0a718a6ab2">glctx_is_current</a> (glctx_t *ctx)</td></tr>
<tr class="separator:ac854d8fc8cb1a3852cc12d0a718a6ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2baa3909d7ec4ea67bdc17351e52f97e" id="r_a2baa3909d7ec4ea67bdc17351e52f97e"><td class="memItemLeft" align="right" valign="top">API_EXPORT void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="glctx_8h.html#a2baa3909d7ec4ea67bdc17351e52f97e">glctx_get_handle</a> (const glctx_t *ctx)</td></tr>
<tr class="separator:a2baa3909d7ec4ea67bdc17351e52f97e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f426a91407c217aed4c35ed746c1516" id="r_a4f426a91407c217aed4c35ed746c1516"><td class="memItemLeft" align="right" valign="top">API_EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="glctx_8h.html#a4f426a91407c217aed4c35ed746c1516">glctx_destroy</a> (glctx_t *ctx)</td></tr>
<tr class="separator:a4f426a91407c217aed4c35ed746c1516"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains a portable method for creating, destroying and managing OpenGL contexts in X-Plane. While X-Plane will provide you an OpenGL context on the main thread, it is sometimes useful to create other contexts for background threads for asynchronous work.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="glctx_8h.html#aca9bb5481d3299cff34eb5ab27e42fe8">glctx_create_invisible()</a> </dd>
<dd>
<a class="el" href="glctx_8h.html#aec924da8e43a699fd146c7941ff7a02f">glctx_make_current()</a> </dd>
<dd>
<a class="el" href="glctx_8h.html#a4f426a91407c217aed4c35ed746c1516">glctx_destroy()</a></dd></dl>
<h2><a class="anchor" id="autotoc_md6"></a>
OpenGL Versions</h2>
<p>OpenGL comes in two major flavors:</p>
<ul>
<li>Modern OpenGL (3.2+)</li>
<li>Legacy OpenGL (2.0 and earlier)</li>
</ul>
<p>There are major incompatibilities between the two branches and you SHOULD always strive to write modern OpenGL code, not legacy. On Windows and Linux, you can request a modern OpenGL context (version 4.0 or later) and most reasonably recent drivers will transparently support legacy OpenGL constructs (unless you set fwd_compat=B_TRUE, in which case we will instruct the driver to explicitly reject legacy features).</p>
<p>However, on MacOS this separation is enforced with an iron hand. So on MacOS, <a class="el" href="glctx_8h.html#aca9bb5481d3299cff34eb5ab27e42fe8">glctx_create_invisible()</a> ignores the version arguments except for <code>major_ver</code>:</p>
<ul>
<li>if you specify major_ver &lt;= 2, you will get OpenGL legacy (version 1.0 up to 2.1 core features)</li>
<li>if you specify major_ver = 3, you will get OpenGL 3.2+ feature compatibility</li>
<li>in all other cases, you will get up to OpenGL 4.1 feature compatibility.</li>
</ul>
<p>Please note that MacOS doesn't support any later OpenGL revisions, so the maximum you can get reliably is the OpenGL 4.1 core profile. </p>

<p class="definition">Definition in file <a class="el" href="glctx_8h_source.html">glctx.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aca9bb5481d3299cff34eb5ab27e42fe8" name="aca9bb5481d3299cff34eb5ab27e42fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca9bb5481d3299cff34eb5ab27e42fe8">&#9670;&#160;</a></span>glctx_create_invisible()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">API_EXPORT glctx_t * glctx_create_invisible </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>win_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">glctx_t *&#160;</td>
          <td class="paramname"><em>share_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>major_ver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minor_ver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool_t&#160;</td>
          <td class="paramname"><em>fwd_compat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool_t&#160;</td>
          <td class="paramname"><em>debug</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates an invisible OpenGL context of a specified version in a platform-independent way. Please note that this must be called on the main X-Plane thread. To create a background rendering thread, call <a class="el" href="glctx_8h.html#aca9bb5481d3299cff34eb5ab27e42fe8">glctx_create_invisible()</a> on the main thread, then hand off the created glctx_t to the background thread, which will subsequently set it as its current context using <a class="el" href="glctx_8h.html#aec924da8e43a699fd146c7941ff7a02f">glctx_make_current()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">win_ptr</td><td>An opaque window pointer to a backing window that the OpenGL will be based on. The context will NOT be drawing to this window. The window handle is only used to fetch hardware context information such as the target GPU and supported capabilities. Unless you know exactly what you are doing, you should always pass the return value of <a class="el" href="glctx_8h.html#aad423f6f6e0898c08d42647f28635a01">glctx_get_xplane_win_ptr()</a> here. </td></tr>
    <tr><td class="paramname">share_ctx</td><td>An optional OpenGL context that you want the new context to share resources with. Please note that this will also share the command pipeline between the contexts, which can introduced undesirable command contention, so use with care. </td></tr>
    <tr><td class="paramname">major_ver</td><td>Major OpenGL version requested. See "OpenGL Versions". </td></tr>
    <tr><td class="paramname">minor_ver</td><td>Major OpenGL version requested. See "OpenGL Versions". </td></tr>
    <tr><td class="paramname">fwd_compat</td><td>If set to true, the returned OpenGL context will NOT be backwards compatible. See "OpenGL Versions" for more info. </td></tr>
    <tr><td class="paramname">debug</td><td>Enables additional error checking and reporting on platforms that support it (Linux &amp; Windows), often at the cost of some performance. Enable on debug code, disable on production code.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, an initialized OpenGL context. On failure, the function returns <code>NULL</code> and prints an error reason to the log. The returned context will NOT yet have been made the current context. To make the context current, use glctx_make_current. </dd></dl>

<p class="definition">Definition at line <a class="el" href="glctx_8c_source.html#l00314">314</a> of file <a class="el" href="glctx_8c_source.html">glctx.c</a>.</p>

</div>
</div>
<a id="a4f426a91407c217aed4c35ed746c1516" name="a4f426a91407c217aed4c35ed746c1516"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f426a91407c217aed4c35ed746c1516">&#9670;&#160;</a></span>glctx_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">API_EXPORT void glctx_destroy </td>
          <td>(</td>
          <td class="paramtype">glctx_t *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroys a previously constructed glctx_t structure. For contexts created using glctx_get_current, this DOESN'T destroy the underlying context. Contexts created using glctx_create_invisible, this DOES destroy the underlying context and MUST be called when you are done using the context. </p>

<p class="definition">Definition at line <a class="el" href="glctx_8c_source.html#l00514">514</a> of file <a class="el" href="glctx_8c_source.html">glctx.c</a>.</p>

</div>
</div>
<a id="a34c5d5ff1ce2cf459cb2dcbad03a9a65" name="a34c5d5ff1ce2cf459cb2dcbad03a9a65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34c5d5ff1ce2cf459cb2dcbad03a9a65">&#9670;&#160;</a></span>glctx_get_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">API_EXPORT glctx_t * glctx_get_current </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs a glctx_t from the current context and returns it. If there is no current context, this function returns <code>NULL</code>. Please note that you MUST release the returned glctx_t structure using glctx_destroy when you are done with it. This does NOT destroy the underlying context. You should only use this to grab X-Plane's main rendering context for the purpose of passing it to glctx_create_invisible as a share_ctx. </p>

<p class="definition">Definition at line <a class="el" href="glctx_8c_source.html#l00370">370</a> of file <a class="el" href="glctx_8c_source.html">glctx.c</a>.</p>

</div>
</div>
<a id="a2baa3909d7ec4ea67bdc17351e52f97e" name="a2baa3909d7ec4ea67bdc17351e52f97e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2baa3909d7ec4ea67bdc17351e52f97e">&#9670;&#160;</a></span>glctx_get_handle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">API_EXPORT void * glctx_get_handle </td>
          <td>(</td>
          <td class="paramtype">const glctx_t *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the underlying OpenGL context handle from a glctx_t. This is highly platform-specific:</p><ol type="1">
<li>On Windows, this returns an <code>HGLRC</code></li>
<li>On Linux, this returns a <code>GLXContext</code></li>
<li>On Mac, this returns a <code>CGLContextObj</code> </li>
</ol>

<p class="definition">Definition at line <a class="el" href="glctx_8c_source.html#l00428">428</a> of file <a class="el" href="glctx_8c_source.html">glctx.c</a>.</p>

</div>
</div>
<a id="a21a9472a02111d427a7fb46b491d7761" name="a21a9472a02111d427a7fb46b491d7761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a9472a02111d427a7fb46b491d7761">&#9670;&#160;</a></span>glctx_get_window_system_handle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">API_EXPORT void * glctx_get_window_system_handle </td>
          <td>(</td>
          <td class="paramtype">glctx_t *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an opaque window system connection handle that can be used to interrogate various hardware properties. This is highly platform specific:</p><ol type="1">
<li>On Windows, this returns the <code>HWND</code> of the associated context.</li>
<li>On Linux, this returns the <code>Display</code> pointer.</li>
<li>On Mac, this function always returns <code>NULL</code>. </li>
</ol>

<p class="definition">Definition at line <a class="el" href="glctx_8c_source.html#l00499">499</a> of file <a class="el" href="glctx_8c_source.html">glctx.c</a>.</p>

</div>
</div>
<a id="aad423f6f6e0898c08d42647f28635a01" name="aad423f6f6e0898c08d42647f28635a01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad423f6f6e0898c08d42647f28635a01">&#9670;&#160;</a></span>glctx_get_xplane_win_ptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">API_EXPORT void * glctx_get_xplane_win_ptr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an opaque handle to the X-Plane main window that can be used in glctx_create_invisible to create a context with the same hardware target. This function must ONLY be called on the main X-Plane thread. The returned value is platform-specific as follows:</p><ol type="1">
<li>On Windows, this returns the HWND of the main X-Plane window.</li>
<li>On Linux, this returns the value of the "DISPLAY" environment variable (or <code>NULL</code> if the variable isn't defined), which can then be passed to XOpenDisplay() to create an X-Windows connection on the same server as where X-Plane is running.</li>
<li>On Mac, this function always returns <code>NULL</code>. </li>
</ol>

<p class="definition">Definition at line <a class="el" href="glctx_8c_source.html#l00361">361</a> of file <a class="el" href="glctx_8c_source.html">glctx.c</a>.</p>

</div>
</div>
<a id="ac854d8fc8cb1a3852cc12d0a718a6ab2" name="ac854d8fc8cb1a3852cc12d0a718a6ab2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac854d8fc8cb1a3852cc12d0a718a6ab2">&#9670;&#160;</a></span>glctx_is_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">API_EXPORT bool_t glctx_is_current </td>
          <td>(</td>
          <td class="paramtype">glctx_t *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>B_TRUE if <code>ctx</code> is the current rendering context, B_FALSE otheriwse. </dd></dl>

<p class="definition">Definition at line <a class="el" href="glctx_8c_source.html#l00415">415</a> of file <a class="el" href="glctx_8c_source.html">glctx.c</a>.</p>

</div>
</div>
<a id="aec924da8e43a699fd146c7941ff7a02f" name="aec924da8e43a699fd146c7941ff7a02f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec924da8e43a699fd146c7941ff7a02f">&#9670;&#160;</a></span>glctx_make_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">API_EXPORT bool_t glctx_make_current </td>
          <td>(</td>
          <td class="paramtype">glctx_t *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets a glctx_t as the calling thread's current context. To remove any context as the current context, pass <code>NULL</code> for <code>ctx</code> in this function. </p>

<p class="definition">Definition at line <a class="el" href="glctx_8c_source.html#l00440">440</a> of file <a class="el" href="glctx_8c_source.html">glctx.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
